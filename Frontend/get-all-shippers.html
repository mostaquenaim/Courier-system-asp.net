<!DOCTYPE html>
<html lang="en-US">
<head>
    <link rel="stylesheet" href="project.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>
<body ng-app="my-app" ng-controller="ShipperController">

    <div>
        <h1>Shipper Details</h1>
        <table border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="shipper in shippers">
                    <td>{{ shipper.ID }}</td>
                    <td>{{ shipper.Name }}</td>
                    <td>{{ shipper.Email }}</td>
                    <td>
                        <button ng-click="deleteShipper(shipper.ID)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        angular.module('my-app', [])
            .controller('ShipperController', function ($scope, $http) {
                $scope.shippers = [];


                $scope.fetchShippers = function () {
                    $http.get('https://localhost:44324/api/shipper/all')
                        .then(function success(response) {
                            $scope.shippers = response.data;
                        }, function error(response) {
                            console.error('Error fetching shippers:', response);
                        });
                };


                $scope.deleteShipper = function (shipperID) {
                    if (confirm('Are you sure you want to delete this shipper?')) {
                        $http.delete('https://localhost:44324/api/shipper/delete/' + shipperID)
                            .then(function success(response) {
                                $scope.fetchShippers(); 
                            }, function error(response) {
                                console.error('Error deleting shipper:', response);
                            });
                    }
                };


                $scope.fetchShippers();
            });
    </script>
</body>
</html>
